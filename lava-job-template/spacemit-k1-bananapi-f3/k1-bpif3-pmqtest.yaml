device_type: spacemit-k1-bananapi-f3
job_name: ${job_name}
timeouts:
  job:
    minutes: 10300
  action:
   minutes: 10299
  actions:
    power-off:
      seconds: 60
priority: medium
visibility: public
metadata:
  # please change these fields when modifying this job for your own tests.
  format: Lava-Test Test Definition 1.0
  name: k1-bananapi-f3-test
  description: "test for k1-bananapi-f3"
  version: "1.0"
# ACTION_BLOCK
actions:
- command:
    name: pre_os_command
    timeout:
      minutes: 20
# DEPLOY_BLOCK
- deploy:
    timeout:
      minutes: 120
    to: tftp
    dtb:
      url: ${kernel_image_url}
    kernel:
      url: ${kernel_image_url}
      type: image
    ramdisk:
      url: ${ramdisk_url}
      install_overlay: False
      install_modules: False
    persistent_nfs:
      address: "{FILE_SERVER_IP}:{NFSROOTFS_PATH}"
- command:
    name: pxelinux_generate
    timeout:
      minutes: 20
# BOOT_BLOCK
- boot:
    timeout:
      minutes: 30
    method: minimal
    soft_reboot:
    - root
    - openEuler
    - reboot
    - The system will reboot now!
    prompts: ["root@openeuler-riscv64", "login:", "Password:"]
    auto_login:
      login_prompt: "(.*)openeuler-riscv64 login:(.*)"
      username: root
      password_prompt: "Password:"
      password: openEuler12#$
# TEST_BLOCK
- test:
      timeout:
        minutes: 10109
      definitions:
        - repository: ${testcase_repo}
          from: git
          name: ${testitem_name}
          path: ${testcase_path}
          parameters:
            DURATION: ${duration}
            ITERATIONS: ${iterations}