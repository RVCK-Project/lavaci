metadata:
  name: cyclictest
  format: "Lava-Test Test Definition 1.0"
  description: "Run fio on RISC-V device"
  maintainer:
    - wujie22@iscas.ac.cn
  os:
    - openEuler-riscv64
  scope:
      - performance
  devices:
    - qemu
    - lpi4a
    - sg2042
params:
  PRIORITY: "99"
  INTERVAL: "1000"
  THREADS: "1"
  AFFINITY: "0"
  DURATION: "5m"
  HISTOGRAM: ""
run:
  steps:
    - cd lava-testcases/performance-test/cyclictest
    - bash cyclictest.sh -D "${DURATION}" -p "${PRIORITY}" -i "${INTERVAL}" -t "${THREADS}" -a "${AFFINITY}" -h "${HISTOGRAM}"
    - chmod +x ../../utils/send-to-lava.sh
    - ../../utils/send-to-lava.sh ./output/result.txt